/*!
 * cm-resize-limited v1.0.1
 * https://github.com/Cerberuser/cm-resize-limited
 *
 * Copyright 2017-2019 Andreas Borgen (https://github.com/Sphinxxxx)
 * Copyright 2019-2019 Konstantin Bagrov (https://github.com/Cerberuser)
 * Released under the MIT license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).cmResize=e()}(this,function(){"use strict";var k=window;return document.documentElement.firstElementChild.appendChild(document.createElement("style")).textContent=".cm-resize-handle{display:block;position:absolute;bottom:0;right:0;z-index:99;width:18px;height:18px;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0,0 16,16'%3E%3Cpath stroke='gray' stroke-width='2' d='M-1,12 l18,-18 M-1,18 l18,-18 M-1,24 l18,-18 M-1,30 l18,-18'/%3E%3C/svg%3E\") center/cover;box-shadow:inset -1px -1px 0 0 silver;cursor:nwse-resize}",function(i,t){var e,c,l,n=t||{},s=n.minWidth||200,u=n.minHeight||100,d=n.maxWidth||400,h=n.maxHeight||800,f=!0===n.resizableWidth,m=!0===n.resizableHeight,o=n.cssClass||"cm-resize-handle",a=i.getWrapperElement(),r=n.handle||((e=a.appendChild(document.createElement("div"))).className=o,e),g=a.querySelector(".CodeMirror-vscrollbar"),p=a.querySelector(".CodeMirror-hscrollbar");function v(){n.handle||(g.style.bottom="18px",p.style.right="18px")}return i.on("update",v),v(),function(t){var e=Element.prototype;e.matches||(e.matches=e.msMatchesSelector||e.webkitMatchesSelector),e.closest||(e.closest=function(t){var e=this;do{if(e.matches(t))return e;e="svg"===e.tagName?e.parentNode:e.parentElement}while(e);return null});var l=(t=t||{}).container||document.documentElement,a=t.selector,o=t.callback||console.log,r=t.callbackDragStart,i=t.callbackDragEnd,c=t.callbackClick,n=t.propagateEvents,s=!1!==t.roundCoords,u=!1!==t.dragOutside,d=t.handleOffset||!1!==t.handleOffset,h=null;switch(d){case"center":h=!0;break;case"topleft":case"top-left":h=!1}var f=void 0;function m(t,e,n,o){var a=t.clientX,r=t.clientY;function i(t,e,n){return Math.max(e,Math.min(t,n))}if(e){var c=e.getBoundingClientRect();if(a-=c.left,r-=c.top,n&&(a-=n[0],r-=n[1]),o&&(a=i(a,0,c.width),r=i(r,0,c.height)),e!==l)(null!==h?h:"circle"===e.nodeName||"ellipse"===e.nodeName)&&(a-=c.width/2,r-=c.height/2)}return s?[Math.round(a),Math.round(r)]:[a,r]}function g(t){t.preventDefault(),n||t.stopPropagation()}function p(t){var e=void 0;if(e=a?a instanceof Element?a.contains(t.target)?a:null:t.target.closest(a):{}){g(t);var n=a&&d?m(t,e):[0,0],o=m(t,l,n);f={target:e,mouseOffset:n,startPos:o,actuallyDragged:!1},r&&r(e,o)}}function v(t){if(f){g(t);var e=f.startPos,n=m(t,l,f.mouseOffset,!u);f.actuallyDragged=f.actuallyDragged||e[0]!==n[0]||e[1]!==n[1],o(f.target,n,e)}}function b(t,e){if(f){if(i||c){var n=!f.actuallyDragged,o=n?f.startPos:m(t,l,f.mouseOffset,!u);c&&n&&!e&&c(f.target,o),i&&i(f.target,o,f.startPos,e||n&&c)}f=null}}function w(t,e){b(E(t),e)}function x(t,e,n){t.addEventListener(e,n)}function M(t){return void 0!==t.buttons?1===t.buttons:1===t.which}function y(t,e){1===t.touches.length?e(E(t)):b(t,!0)}function E(t){var e=t.targetTouches[0];return(e=e||t.changedTouches[0]).preventDefault=t.preventDefault.bind(t),e.stopPropagation=t.stopPropagation.bind(t),e}x(l,"mousedown",function(t){M(t)?p(t):b(t,!0)}),x(l,"touchstart",function(t){return y(t,p)}),x(k,"mousemove",function(t){f&&(M(t)?v(t):b(t))}),x(k,"touchmove",function(t){return y(t,v)}),x(l,"mouseup",function(t){f&&!M(t)&&b(t)}),x(l,"touchend",function(t){return w(t)}),x(l,"touchcancel",function(t){return w(t,!0)})}({container:r.offsetParent,selector:r,callbackDragStart:function(t,e){c=e,l=[a.clientWidth,a.clientHeight]},callback:function(t,e){var n=e[0]-c[0],o=e[1]-c[1],a=f?Math.min(d,Math.max(s,l[0]+n)):null,r=m?Math.min(h,Math.max(u,l[1]+o)):null;i.setSize(a,r)}}),r}});